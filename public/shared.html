<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shared Model Output — MiniLLM</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div style="max-width:700px; margin:80px auto; padding:2rem;">
    <a href="/" style="color:var(--accent); text-decoration:none; font-size:0.9rem;">← Back to MiniLLM</a>
    <h1 style="margin-top:1rem;">Shared Neural Network Output</h1>
    <div id="loading" style="color:var(--text-dim); margin-top:2rem;">Loading...</div>
    <div id="content" style="display:none; margin-top:2rem;">
      <div class="train-stats" id="stats"></div>
      <div style="margin-top:1.5rem; padding:1.5rem; background:rgba(255,255,255,0.5); border-radius:var(--radius-sm); font-size:0.95rem; line-height:1.8; white-space:pre-wrap;" id="output"></div>
      <p style="margin-top:1.5rem; font-size:0.85rem; color:var(--text-dim);">Generated by a tiny LSTM neural network with 35,900 parameters. <a href="/">Try it yourself →</a></p>
    </div>
    <div id="error" style="display:none; margin-top:2rem; color:#e57373;"></div>
  </div>
  <script src="/js/particles.js"></script>
  <script>
    new ParticleSystem().start();
    const id = new URLSearchParams(window.location.search).get('id');
    if (!id) { document.getElementById('error').style.display = 'block'; document.getElementById('error').textContent = 'No model ID provided.'; document.getElementById('loading').style.display = 'none'; }
    else {
      fetch('/api/models/' + encodeURIComponent(id))
        .then(r => { if (!r.ok) throw new Error('Not found'); return r.json(); })
        .then(data => {
          document.getElementById('loading').style.display = 'none';
          document.getElementById('content').style.display = 'block';
          const stats = document.getElementById('stats');
          stats.innerHTML = `
            <div class="stat-item"><div class="stat-value">${data.preset || 'unknown'}</div><div class="stat-label">Trained on</div></div>
            <div class="stat-item"><div class="stat-value">LSTM</div><div class="stat-label">Architecture</div></div>
            <div class="stat-item"><div class="stat-value">35,900</div><div class="stat-label">Parameters</div></div>
          `;
          const prompt = data.prompt || '';
          const output = data.output || data.text || '';
          document.getElementById('output').innerHTML = '<span style="color:var(--text-dim);">' + esc(prompt) + '</span><span style="color:var(--accent); font-weight:500;">' + esc(output) + '</span>';
        })
        .catch(e => {
          document.getElementById('loading').style.display = 'none';
          document.getElementById('error').style.display = 'block';
          document.getElementById('error').textContent = 'Model not found. It may have expired or the link is invalid.';
        });
    }
    function esc(s) { return s ? s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;') : ''; }
  </script>
</body>
</html>
